---
name: silverblue-nvidia
description: silverblue with nvidia and (minimal) COSMIC
base-image: ghcr.io/ublue-os/base-nvidia
image-version: latest

modules:    
  - type: dnf
    repos:
      copr:
        - 'trixieua/mutter-patched'
    install:
      packages:
        - gnome-shell
        - gnome-software
        - nautilus
        - gdm
        - gnome-console
        
        - distrobox
        - steam-devices
    group-install:
      packages:
        - virtualization
    remove:
      packages:
        - malcontent
        - gnome-tour
        - nvtop
        - htop
        - virt-viewer

  - type: default-flatpaks
    configurations:
      - scope: user
        repo:
          title: Flathub (user)
      - notify: true
        scope: system
        repo:
          title: Flathub (system)
        install:
          - app.devsuite.Ptyxis
          - im.nheko.Nheko
          - org.kde.okular
          - org.libreoffice.LibreOffice
          - it.mijorus.gearlever
          
  - type: script
    snippets:
      - "systemctl set-default graphical.target"
    
  - type: systemd
    system:
      enabled:
        - libvirtd.service
    
  - type: signing
